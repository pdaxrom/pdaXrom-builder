diff -Nur MPlayer-1.0pre3try2/configarm.sh MPlayer-1.0pre3try2-zaurus/configarm.sh
--- MPlayer-1.0pre3try2/configarm.sh	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/configarm.sh	2004-04-21 05:23:40.000000000 +0000
@@ -0,0 +1 @@
+_inc_extra="-mcpu=xscale -mtune=xscale -Wa,-mfpu=fpa11" _ld_extra="-Wl,-rpath-link,$X11LIB" ./configure --target=armv5tel-cacko-linux --prefix=/usr --with-x11incdir=X11INC --with-x11libdir=$X11LIB --disable-arts --disable-esd --disable-alsa --disable-sunaudio --disable-nas --enable-gui --cc=armv5tel-linux-gcc --enable-vidix --enable-png --enable-jpeg --enable-freetype --disable-big-endian --enable-sdl --enable-fontconfig --enable-menu --enable-vorbis --enable-tremor --enable-fbdev
diff -Nur MPlayer-1.0pre3try2/config.h MPlayer-1.0pre3try2-zaurus/config.h
--- MPlayer-1.0pre3try2/config.h	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/config.h	2004-04-21 03:00:18.000000000 +0000
@@ -0,0 +1,549 @@
+/* -------- This file has been automatically generated by configure ---------
+   Note: Any changes in it will be lost when you run configure again. */
+
+/* Protect against multiple inclusion */
+#ifndef MPLAYER_CONFIG_H
+#define MPLAYER_CONFIG_H 1
+
+/* use GNU internationalization */
+#define USE_I18N 1
+
+/* missing mmap function on libc5 systems */
+#ifndef MAP_FAILED
+# define MAP_FAILED     ((void *) -1)
+#endif
+
+/* use setlocale() function */
+#define USE_SETLOCALE 1
+
+/* Runtime CPU detection */
+#undef RUNTIME_CPUDETECT
+
+/* Dynamic a/v plugins */
+#undef DYNAMIC_PLUGINS
+
+/* "restrict" keyword */
+#define restrict __restrict
+
+#define PREFIX "/usr"
+
+/* define this to use simple idct with patched libavcodec */
+#define SIMPLE_IDCT 1
+
+#define USE_OSD 1
+#define USE_SUB 1
+
+/* enable/disable SIGHANDLER */
+#define ENABLE_SIGHANDLER 1
+
+/* Toggles debugging informations */
+#undef MP_DEBUG
+
+/* Indicates that Ogle's libdvdread is available for DVD playback */
+#undef USE_DVDREAD
+
+/* Indicates that dvdread is from libmpdvdkit */
+#undef USE_MPDVDKIT
+
+/* Additional options for libmpdvdkit*/
+#undef DVD_STRUCT_IN_DVD_H
+#define DVD_STRUCT_IN_LINUX_CDROM_H 1
+#undef DVD_STRUCT_IN_SYS_CDIO_H
+#undef DVD_STRUCT_IN_SYS_DVDIO_H
+#undef DVD_STRUCT_IN_BSDI_DVDIOCTL_DVD_H
+
+
+
+
+#undef SOLARIS_USCSI
+#undef HPUX_SCTL_IO
+#define HAVE_STDDEF_H 1
+
+/* Common data directory (for fonts, etc) */
+#define MPLAYER_DATADIR "/usr/share/mplayer"
+#define MPLAYER_CONFDIR "/usr/etc/mplayer"
+#define MPLAYER_LIBDIR "/usr/lib"
+
+/* Define this to compile stream-caching support, it can be enabled via
+   -cache <kilobytes> */
+#define USE_STREAM_CACHE 1
+
+/* Define to include support for XviD/Divx4Linux/OpenDivx */
+#undef USE_DIVX
+
+/* Define to use the new XviD/DivX4Linux library instead of open source OpenDivX */
+/* You have to change DECORE_LIBS in config.mak, too! */
+#undef NEW_DECORE
+
+/* Define if you are using DivX5Linux Decore library */
+#undef DECORE_DIVX5
+
+/* Define if you are using XviD library */
+#undef HAVE_XVID3
+#undef HAVE_XVID4
+#undef DECORE_XVID
+#undef ENCORE_XVID
+
+/* Define to include support for libdv-0.9.5 */
+#undef HAVE_LIBDV095
+
+/* If build mencoder */
+#define HAVE_MENCODER
+
+/* Indicates if XviD/Divx4linux encore is available
+   Note: for mencoder */
+#undef HAVE_DIVX4ENCORE
+
+/* Indicates if libmp3lame is available
+   Note: for mencoder */
+#undef HAVE_MP3LAME
+#undef CONFIG_MP3LAME
+
+/* Define libmp1e for realtime mpeg encoding (for DXR3 and DVB cards) */
+#undef USE_MP1E
+
+/* Define this to enable avg. byte/sec-based AVI sync method by default:
+   (use -bps or -nobps commandline option for run-time method selection)
+   -bps gives better sync for vbr mp3 audio, it is now default */
+#define AVI_SYNC_BPS 1
+
+/* Undefine this if you do not want to select mono audio (left or right)
+   with a stereo MPEG layer 2/3 audio stream. The command line option
+   -stereo has three possible values (0 for stereo, 1 for left-only, 2 for
+   right-only), with 0 being the default.
+   */
+#define USE_FAKE_MONO 1
+
+/* Undefine this if your sound card driver has no working select().
+   If you have kernel Oops, player hangups, or just no audio, you should
+   try to recompile MPlayer with this option disabled! */
+#define HAVE_AUDIO_SELECT 1
+
+/* define this to use iconv(3) function to codepage conversions */
+#define USE_ICONV 1
+
+/* define this to use RTC (/dev/rtc) for video timers (LINUX only) */
+#undef HAVE_RTC
+
+/* set up max. outburst. use 65536 for ALSA 0.5, for others 16384 is enough */
+#define MAX_OUTBURST 65536
+
+/* set up audio OUTBURST. Do not change this! */
+#define OUTBURST 512
+
+/* Define this if your system has the header file for the OSS sound interface */
+#define HAVE_SYS_SOUNDCARD_H 1
+
+/* Define this if your system has the header file for the OSS sound interface
+ * in /usr/include */
+#undef HAVE_SOUNDCARD_H
+
+/* Define this if your system has the sysinfo header */
+#define HAVE_SYS_SYSINFO_H 1
+
+/* Define this if your system uses ftello() for off_t seeking */
+
+#define HAVE_FTELLO 1
+#ifndef HAVE_FTELLO
+# define ftello(a) ftell(a)
+#endif
+
+/* Define this if your system has the "malloc.h" header file */
+#define HAVE_MALLOC_H 1
+
+/* memalign is mapped to malloc if unsupported */
+#define HAVE_MEMALIGN 1
+#ifndef HAVE_MEMALIGN
+# define memalign(a,b) malloc(b)
+#endif
+
+/* Define this if your system has the "alloca.h" header file */
+#define HAVE_ALLOCA_H 1
+
+/* Define this if your system has the "sys/mman.h" header file */
+#define HAVE_SYS_MMAN_H 1
+
+/* Define this if you have the elf dynamic linker -ldl library */
+#define HAVE_LIBDL 1
+
+/* Define this if you have the kstat kernel statistics library */
+#undef HAVE_LIBKSTAT
+
+/* Define this if you have zlib */
+#define HAVE_ZLIB 1
+
+/* Define this if you have shm support */
+#define HAVE_SHM 1
+
+/* Define this if your system has scandir & alphasort */
+#define HAVE_SCANDIR 1
+
+/* Define this if your system has strsep */
+#define HAVE_STRSEP 1
+
+/* Define this if your system has vsscanf */
+#define HAVE_VSSCANF 1
+
+/* Define this if your system has no posix select */
+#undef HAVE_NO_POSIX_SELECT
+
+/* Define this if your system has gettimeofday */
+#define HAVE_GETTIMEOFDAY 1
+
+/* Define this if your system has glob */
+#define HAVE_GLOB 1
+
+/* LIRC (remote control, see www.lirc.org) support: */
+#undef HAVE_LIRC
+
+/*
+ * LIRCCD (LIRC client daemon)
+ * See http://www.dolda2000.cjb.net/~fredrik/lirccd/
+ */
+#undef HAVE_LIRCC
+
+/*
+ * FLAC decoding
+ */
+#define HAVE_FLAC 1
+#define USE_MPFLAC_DECODER 1
+
+/* DVD navigation support using libdvdnav */
+
+
+
+/* Define this to enable MPEG 1/2 image postprocessing (requires a FAST CPU!) */
+#define MPEG12_POSTPROC 1
+
+/* Define this to enable image postprocessing in libavcodec (requires a FAST CPU!) */
+#define FF_POSTPROCESS 1
+
+/* Define to include support for OpenDivx postprocessing */
+#undef HAVE_ODIVX_POSTPROCESS
+
+/* Win32 DLL support */
+#undef USE_WIN32DLL
+#define WIN32_PATH ""
+
+/* DirectShow support */
+#undef USE_DIRECTSHOW
+
+/* Mac OS X specific features */
+#undef MACOSX
+
+/* Build our Win32-loader */
+
+
+/* ffmpeg's libavcodec support (requires libavcodec source) */
+#define USE_LIBAVCODEC 1
+#undef USE_LIBAVCODEC_SO
+
+/* risky codecs */
+#define CONFIG_RISKY 1
+
+/* Use libavcodec's decoders */
+#define CONFIG_DECODERS 1
+/* Use libavcodec's encoders */
+#define CONFIG_ENCODERS 1
+
+/* Use codec libs included in mplayer CVS / source dist: */
+#define USE_MP3LIB
+#define USE_LIBA52
+#define USE_LIBMPEG2
+
+/* Use the SVQ1 decoder in libmpcodecs - we don't want/need it with libavcodec */
+#ifndef USE_LIBAVCODEC
+#define USE_SVQ1
+#endif
+
+/* Use libfame encoder filter */
+#undef USE_LIBFAME
+
+/* XAnim DLL support */
+#undef USE_XANIM
+/* Default search path */
+#undef XACODEC_PATH
+
+/* RealPlayer DLL support */
+#undef USE_REALCODECS
+/* Default search path */
+#undef REALCODEC_PATH
+
+/* LIVE.COM Streaming Media library support */
+#undef STREAMING_LIVE_DOT_COM
+
+/* Use 3dnow/mmxext/sse/mmx optimized fast memcpy() [maybe buggy... signal 4]*/
+#define USE_FASTMEMCPY 1
+
+/* Use unrarlib for Vobsubs */
+#define USE_UNRARLIB 1
+
+/* gui support, please do not edit this option */
+#define HAVE_NEW_GUI 1
+
+/* Audio output drivers */
+#define USE_OSS_AUDIO 1
+#define PATH_DEV_DSP "/dev/dsp"
+#define PATH_DEV_MIXER "/dev/mixer"
+#undef HAVE_ALSA5
+#undef HAVE_ALSA9
+
+#undef USE_ESD
+#undef HAVE_ESD_LATENCY
+#undef HAVE_SYS_ASOUNDLIB_H
+#undef HAVE_ALSA_ASOUNDLIB_H
+#undef USE_SUN_AUDIO
+#undef USE_SGI_AUDIO
+#undef HAVE_WIN32WAVEOUT
+#undef HAVE_NAS
+
+/* Enable fast OSD/SUB renderer (looks ugly, but uses less CPU power) */
+#undef FAST_OSD
+#undef FAST_OSD_TABLE
+
+/* Enable TV Interface support */
+#define USE_TV 1
+
+/* Enable EDL support */
+#define USE_EDL
+
+/* Enable Video 4 Linux TV interface support */
+#undef HAVE_TV_V4L
+
+/* Enable Video 4 Linux 2 TV interface support */
+#undef HAVE_TV_V4L2
+
+/* Enable *BSD BrookTree TV interface support */
+#undef HAVE_TV_BSDBT848
+
+/* Define if your processor stores words with the most significant
+   byte first (like Motorola and SPARC, unlike Intel and VAX).  */
+#undef WORDS_BIGENDIAN
+
+#define ARCH_ARMV4L 1
+
+/* libmpeg2 wants ARCH_PPC and the rest of mplayer use ARCH_POWERPC,
+ * define ARCH_PPC if ARCH_POWERPC is set to cope with that.
+ */
+#ifdef ARCH_POWERPC
+#define ARCH_PPC 1
+#endif
+
+/* the same issue as with ARCH_POWERPC but with ffmpeg/libavcodec */
+#ifdef ARCH_ARMV4L
+#define ARCH_ARM 1
+#endif
+
+/* only gcc3 can compile mvi instructions */
+
+
+/* Define this for Cygwin build for win32 */
+
+
+/* Define this to any prefered value from 386 up to infinity with step 100 */
+#define __CPU__ arm
+
+#define MP_WORDSIZE 32
+
+#undef TARGET_LINUX
+
+#undef HAVE_VCD
+
+#ifdef sun
+#define	DEFAULT_CDROM_DEVICE	"/vol/dev/aliases/cdrom0"
+#define DEFAULT_DVD_DEVICE	DEFAULT_CDROM_DEVICE
+#elif defined(HPUX)
+#define DEFAULT_CDROM_DEVICE    "/dev/cdrom"
+#define DEFAULT_DVD_DEVICE     "/dev/dvd"
+#elif defined(WIN32)
+#define DEFAULT_CDROM_DEVICE    "D:"
+#define DEFAULT_DVD_DEVICE	"D:"
+#elif defined(SYS_DARWIN)
+#define DEFAULT_CDROM_DEVICE    "/dev/rdiskN"
+#define DEFAULT_DVD_DEVICE	DEFAULT_CDROM_DEVICE
+#else
+#define DEFAULT_CDROM_DEVICE    "/dev/cdrom"
+#define DEFAULT_DVD_DEVICE	"/dev/dvd"
+#endif
+
+
+/*----------------------------------------------------------------------------
+**
+** NOTE: Instead of modifying these definitions here, use the
+**       --enable/--disable options of the ./configure script!
+**       See ./configure --help for details.
+**
+*---------------------------------------------------------------------------*/
+
+/* C99 lrintf function available */
+#define HAVE_LRINTF 1
+
+/* int_fastXY_t emulation */
+
+
+/* nanosleep support */
+#define HAVE_NANOSLEEP 1
+
+/* SMB support */
+#undef LIBSMBCLIENT
+
+/* termcap flag for getch2.c */
+#define USE_TERMCAP 1
+
+/* termios flag for getch2.c */
+#define HAVE_TERMIOS 1
+#undef HAVE_TERMIOS_H
+#define HAVE_SYS_TERMIOS_H 1
+
+/* enable PNG support */
+#define HAVE_PNG 1
+
+/* enable JPEG support */
+#define HAVE_JPEG 1
+
+/* enable GIF support */
+#undef HAVE_GIF
+#undef HAVE_GIF_4
+
+
+/* enable FreeType support */
+#define HAVE_FREETYPE
+
+/* enable Fontconfig support */
+#define HAVE_FONTCONFIG
+
+/* enable FriBiDi usage */
+#undef USE_FRIBIDI
+
+/* liblzo support */
+#undef USE_LIBLZO
+
+/* libmad support */
+#define USE_LIBMAD 1
+
+/* enable OggVorbis support */
+#define HAVE_OGGVORBIS 1
+
+/* enable Tremor as vorbis decoder */
+#define TREMOR 1
+
+/* enable OggTheora support */
+#undef HAVE_OGGTHEORA
+
+/* enable Matroska support */
+#undef HAVE_MATROSKA
+
+/* enable FAAD (AAC) support */
+#define HAVE_FAAD 1
+#define USE_INTERNAL_FAAD 1
+#define FAADVERSION 20
+
+/* enable network */
+#define MPLAYER_NETWORK 1
+
+/* enable ftp support */
+#define HAVE_FTP 1
+
+/* enable winsock2 instead of Unix functions*/
+#undef HAVE_WINSOCK2
+
+/* define this to use inet_aton() instead of inet_pton() */
+#undef USE_ATON
+
+/* enables / disables cdparanoia support */
+#undef HAVE_CDDA
+
+/* enables / disables VIDIX usage */
+#define CONFIG_VIDIX 1
+
+/* enables / disables new input joystick support */
+#undef HAVE_JOYSTICK
+
+/* enables / disables QTX codecs */
+#undef USE_QTX_CODECS
+
+/* enables / disables osd menu */
+#define HAVE_MENU 1
+
+/* enables / disables subtitles sorting */
+#define USE_SORTSUB 1
+
+/* XMMS input plugin support */
+#undef HAVE_XMMS
+#define XMMS_INPUT_PLUGIN_DIR ""
+
+/* enables inet6 support */
+#define HAVE_AF_INET6 1
+
+/* do we have gethostbyname2? */
+#define HAVE_GETHOSTBYNAME2 1
+
+/* Extension defines */
+#undef HAVE_3DNOW	// only define if you have 3DNOW (AMD k6-2, AMD Athlon, iDT WinChip, etc.)
+#undef HAVE_3DNOWEX	// only define if you have 3DNOWEX (AMD Athlon, etc.)
+#undef HAVE_MMX	// only define if you have MMX (newer x86 chips, not P54C/PPro)
+#undef HAVE_MMX2	// only define if you have MMX2 (Athlon/PIII/4/CelII)
+#undef HAVE_SSE	// only define if you have SSE (Intel Pentium III/4 or Celeron II)
+#undef HAVE_SSE2	// only define if you have SSE2 (Intel Pentium 4)
+	// only define if you have Altivec (G4)
+
+#ifdef HAVE_MMX
+#define USE_MMX_IDCT 1
+#endif
+
+	// enables usage of altivec.h
+
+
+#undef HAVE_MLIB  // Sun mediaLib, available only on solaris
+
+/* libmpeg2 uses a different feature test macro for mediaLib */
+#ifdef HAVE_MLIB
+#define LIBMPEG2_MLIB 1
+#endif
+
+/* libvo options */
+#define SCREEN_SIZE_X 1
+#define SCREEN_SIZE_Y 1
+#define HAVE_X11 1
+#undef HAVE_XV
+#undef HAVE_XVMC
+#undef HAVE_XF86VM
+#undef HAVE_XINERAMA
+#undef HAVE_GL
+#undef GL_WIN32
+#undef HAVE_DGA
+#undef HAVE_DGA2
+#define HAVE_SDL 1
+/* defined for SDLlib with keyrepeat bugs (before 1.2.1) */
+#undef BUGGY_SDL
+#undef HAVE_DIRECTX
+#undef HAVE_GGI
+#undef HAVE_3DFX
+#undef HAVE_TDFXFB
+#undef HAVE_TDFX_VID
+#undef HAVE_DIRECTFB
+
+#undef HAVE_ZR
+#undef HAVE_BL
+#define HAVE_MGA 1
+#define HAVE_XMGA 1
+
+#define HAVE_FBDEV 1
+#undef HAVE_DXR2
+#undef HAVE_DXR3
+#undef HAVE_DVB
+#undef HAS_DVBIN_SUPPORT 
+#undef HAVE_SVGALIB
+#undef HAVE_VESA
+#define HAVE_XDPMS 1
+#undef HAVE_AA
+#define HAVE_TGA 1
+
+/* used by GUI: */
+#define HAVE_XSHAPE 1
+
+#if defined(HAVE_GL) || defined(HAVE_X11) || defined(HAVE_XV)
+#define X11_FULLSCREEN 1
+#endif
+
+#endif /* MPLAYER_CONFIG_H */
diff -Nur MPlayer-1.0pre3try2/config.mak MPlayer-1.0pre3try2-zaurus/config.mak
--- MPlayer-1.0pre3try2/config.mak	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/config.mak	2004-04-21 03:00:18.000000000 +0000
@@ -0,0 +1,156 @@
+# -------- Generated by configure -----------
+
+LANG = C
+LANGUAGES = en
+TARGET_OS = cacko
+DESTDIR =
+prefix = $(DESTDIR)/usr
+BINDIR = $(DESTDIR)/usr/bin
+DATADIR = $(DESTDIR)/usr/share/mplayer
+MANDIR = $(DESTDIR)/usr/man
+CONFDIR = $(DESTDIR)/usr/etc/mplayer
+LIBDIR = $(DESTDIR)/usr/lib
+#AR = ar
+CC = armv5tel-linux-gcc
+AWK = gawk
+RANLIB = ranlib
+INSTALL = install
+# OPTFLAGS = -O4     -pipe -fomit-frame-pointer -ffast-math
+EXTRA_INC = -mcpu=xscale -mtune=xscale -Wa,-mfpu=fpa11 -I/opt/arm/3.3.2/armv5tel-cacko-linux/include/gtk-1.2 -I/opt/arm/3.3.2/armv5tel-cacko-linux/include/glib-1.2 -I/opt/arm/3.3.2/armv5tel-cacko-linux/lib/glib/include -I/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/include
+OPTFLAGS = -O4   -pipe -ffast-math -fomit-frame-pointer $(EXTRA_INC)
+STRIPBINARIES = yes
+
+
+
+MPLAYER_NETWORK = yes
+STREAMING_LIVE_DOT_COM = no
+MPLAYER_NETWORK_LIB = -lnsl 
+DVBIN = no
+VIDIX = yes
+SHARED_PP = no
+CONFIG_PP = yes
+CONFIG_RISKY = yes
+CONFIG_MP3LAME = no
+LIBMENU = yes
+I18NLIBS = 
+MATROSKA = no
+MATROSKA_LIB = 
+
+OPENDIVX = no
+
+UNRARLIB = yes
+HAVE_FFPOSTPROCESS = yes
+PNG = yes
+JPEG = yes
+GIF = no
+
+EXTRA_LIB = -Wl,-rpath-link,/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/lib
+Z_LIB =   -lz
+HAVE_MLIB = no
+WIN32_LIB = 
+STATIC_LIB = 
+
+X11_INC = -IX11INC
+X11DIR = -L/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/lib -lXext -lX11 -lnsl
+
+HAVE_XVMC_ACCEL = no
+
+# for libavcodec:
+SRC_PATH=.
+LIBPREF=lib
+LIBSUF=.a
+SLIBPREF=lib
+SLIBSUF=.so
+
+# video output
+X_LIB =       -L/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/lib -lXext -lX11 -lnsl -lmad -lnsl
+GGI_LIB = 
+MLIB_LIB =  
+MLIB_INC = 
+DXR2_INC = 
+DVB_INC = 
+PNG_LIB = -lpng -lz
+JPEG_LIB = -ljpeg
+GIF_LIB = 
+SDL_LIB = -L/opt/arm/3.3.2/armv5tel-cacko-linux/lib -Wl,-rpath,/opt/arm/3.3.2/armv5tel-cacko-linux/lib -lSDL -lpthread
+SVGA_LIB = 
+AA_LIB = 
+
+# audio output
+ALSA_LIB = 
+NAS_LIB = 
+ARTS_LIB = 
+ARTS_INC = 
+ESD_LIB = 
+ESD_INC = 
+SGIAUDIO_LIB = 
+
+# input/demuxer/codecs
+TERMCAP_LIB = -ltermcap
+LIRC_LIB = 
+LIRCC_LIB = 
+DVDREAD_LIB = 
+DVDKIT = no
+DVDKIT2 = 
+DVDKIT_SHARED = no
+SDL_INC = -I/opt/arm/3.3.2/armv5tel-cacko-linux/include/SDL -D_REENTRANT
+W32_DEP = 
+W32_LIB = 
+DS_DEP = 
+DS_LIB = 
+AV_DEP = libavcodec/libavcodec.a
+AV_LIB = libavcodec/libavcodec.a
+FAME = no
+FAME_LIB = 
+MP1E_DEP = 
+MP1E_LIB = 
+ARCH_LIB =   -lpthread -ldl  -liconv
+XVID = no
+XVID_INC = 
+XVID_LIB = 
+DECORE_LIB =  
+MENCODER = yes
+ENCORE_LIB =   
+DIRECTFB_INC = 
+DIRECTFB_LIB = 
+CDPARANOIA_INC = 
+CDPARANOIA_LIB = 
+FREETYPE_INC = -I/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/include -I/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/include/freetype2
+FREETYPE_LIB = -L/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/lib -lfreetype
+FONTCONFIG_INC = -I/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/include  
+FONTCONFIG_LIB = -L/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/lib -lfontconfig  
+FRIBIDI_INC = 
+FRIBIDI_LIB = 
+LIBLZO_LIB= 
+MAD_LIB = -lmad
+VORBIS_LIB = -lvorbisidec 
+THEORA_LIB = 
+FAAD_LIB = 
+INTERNAL_FAAD = yes
+SMBSUPPORT_LIB = 
+XMMS_PLUGINS = no
+XMMS_LIB = 
+MACOSX = no
+MACOSX_FRAMEWORKS = 
+FLAC_LIB = -Llibmpflac -lmpflac
+MPFLAC = full
+
+# --- Some stuff for autoconfigure ----
+TARGET_ARCH_ARMV4L = yes
+TARGET_CYGWIN = no
+TARGET_MINGW32 = no
+TARGET_CPU=arm
+TARGET_MMX = 
+TARGET_MMX2 = 
+TARGET_3DNOW = 
+TARGET_3DNOWEX = 
+TARGET_SSE = 
+TARGET_ALTIVEC = 
+
+# --- GUI stuff ---
+GTKLIB =  -L/opt/arm/3.3.2/armv5tel-cacko-linux/lib -L/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/lib -lgtk -lgdk -rdynamic -lgmodule -lglib -ldl -lXext -lX11 -lm
+GLIBLIB =   -L/opt/arm/3.3.2/armv5tel-cacko-linux/lib -lglib
+GTK_LIBS =   $(GTKLIB) $(GLIBLIB)
+GUI = yes
+DEBUG = -DDEBUG
+
diff -Nur MPlayer-1.0pre3try2/configure MPlayer-1.0pre3try2-zaurus/configure
--- MPlayer-1.0pre3try2/configure	2003-12-08 21:33:31.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/configure	2004-04-20 22:10:20.000000000 +0000
@@ -2151,7 +2151,7 @@
 #include <sys/types.h>
 int main(void) { printf("%d\n", sizeof(size_t)*8); return 0; }
 EOF
-cc_check && _wordsize=`$TMPO` && _mp_wordsize="#define MP_WORDSIZE $_wordsize"
+cc_check && _wordsize="32" && _mp_wordsize="#define MP_WORDSIZE $_wordsize"
 echores "$_wordsize"
 
 
@@ -2289,6 +2289,8 @@
 EOF
 if mingw32 ; then
   _ld_pthread=''
+elif true ; then
+  _ld_pthread='-lpthread'
 elif ( cc_check && $TMPO ) ; then              # QNX
   _ld_pthread=''
 elif ( cc_check -lpthread && $TMPO ) ; then
@@ -4574,9 +4576,10 @@
   return 0;
 }
 EOF
-  if cc_check -I- $_inc_faad $_ld_faad -lm && "$TMPO" >> "$TMPLOG" ; then
-    _faad_version=`"$TMPO"`
-    _faad_tempversion=`"$TMPO" | sed -e 's/^\([0-9]\{1,\}\)\.\([0-9]\{1,\}\).*/\1\2/'`
+  #if cc_check -I- $_inc_faad $_ld_faad -lm && "$TMPO" >> "$TMPLOG" ; then
+  if true ; then
+    _faad_version="2.0 RC1 "
+    _faad_tempversion=`echo "2.0 RC1 " | sed -e 's/^\([0-9]\{1,\}\)\.\([0-9]\{1,\}\).*/\1\2/'`
     _def_faad_version="#define FAADVERSION $_faad_tempversion"
     echores "$_faad_version"
   else
diff -Nur MPlayer-1.0pre3try2/Gui/config.mak MPlayer-1.0pre3try2-zaurus/Gui/config.mak
--- MPlayer-1.0pre3try2/Gui/config.mak	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/Gui/config.mak	2004-04-21 03:00:18.000000000 +0000
@@ -0,0 +1,7 @@
+# -------- Generated by configure -----------
+
+GTKINC = -I/opt/arm/3.3.2/armv5tel-cacko-linux/include/gtk-1.2 -I/opt/arm/3.3.2/armv5tel-cacko-linux/include/glib-1.2 -I/opt/arm/3.3.2/armv5tel-cacko-linux/lib/glib/include -I/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/include
+GTKLIBS = -L/opt/arm/3.3.2/armv5tel-cacko-linux/lib -L/opt/arm/3.3.2/armv5tel-cacko-linux/X11R6/lib -lgtk -lgdk -rdynamic -lgmodule -lglib -ldl -lXext -lX11 -lm
+GLIBINC = -I/opt/arm/3.3.2/armv5tel-cacko-linux/include/glib-1.2 -I/opt/arm/3.3.2/armv5tel-cacko-linux/lib/glib/include
+GLIBLIBS = -L/opt/arm/3.3.2/armv5tel-cacko-linux/lib -lglib
+
diff -Nur MPlayer-1.0pre3try2/help_mp.h MPlayer-1.0pre3try2-zaurus/help_mp.h
--- MPlayer-1.0pre3try2/help_mp.h	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/help_mp.h	2004-04-21 03:00:18.000000000 +0000
@@ -0,0 +1,5 @@
+//
+// WARNING! This is a generated file. Do NOT edit.
+// See the help/ subdir for the editable files.
+//
+#include "help/help_mp-en.h"
diff -Nur MPlayer-1.0pre3try2/libao2/config.mak MPlayer-1.0pre3try2-zaurus/libao2/config.mak
--- MPlayer-1.0pre3try2/libao2/config.mak	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/libao2/config.mak	2004-04-21 03:00:18.000000000 +0000
@@ -0,0 +1,3 @@
+include ../config.mak
+OPTIONAL_SRCS =  ao_sdl.c ao_oss.c
+OPTIONAL_OBJS = ao_sdl.o ao_oss.o
diff -Nur MPlayer-1.0pre3try2/libfaad2/common.h MPlayer-1.0pre3try2-zaurus/libfaad2/common.h
--- MPlayer-1.0pre3try2/libfaad2/common.h	2003-10-03 22:22:27.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/libfaad2/common.h	2004-04-20 22:19:37.000000000 +0000
@@ -49,7 +49,7 @@
 /* use double precision */
 /* #define USE_DOUBLE_PRECISION */
 /* use fixed point reals */
-//#define FIXED_POINT
+#define FIXED_POINT
 
 #define ERROR_RESILIENCE
 
diff -Nur MPlayer-1.0pre3try2/libvo/config.mak MPlayer-1.0pre3try2-zaurus/libvo/config.mak
--- MPlayer-1.0pre3try2/libvo/config.mak	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/libvo/config.mak	2004-04-21 03:00:18.000000000 +0000
@@ -0,0 +1,3 @@
+include ../config.mak
+OPTIONAL_SRCS =  vo_tga.c x11_common.c vo_x11.c vo_xover.c vo_mga.c vo_xmga.c vo_fbdev.c vo_fbdev2.c vo_png.c vo_jpeg.c vo_sdl.c vo_cvidix.c vo_xvidix.c
+OPTIONAL_OBJS = vo_tga.o x11_common.o vo_x11.o vo_xover.o vo_mga.o vo_xmga.o vo_fbdev.o vo_fbdev2.o vo_png.o vo_jpeg.o vo_sdl.o vo_cvidix.o vo_xvidix.o
diff -Nur MPlayer-1.0pre3try2/loader/wine/mmreg.h MPlayer-1.0pre3try2-zaurus/loader/wine/mmreg.h
--- MPlayer-1.0pre3try2/loader/wine/mmreg.h	2002-09-13 19:43:17.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/loader/wine/mmreg.h	2004-04-20 21:18:45.000000000 +0000
@@ -96,7 +96,7 @@
   WORD          nBlockSize WINE_PACKED;
   WORD          nFramesPerBlock WINE_PACKED;
   WORD          nCodecDelay WINE_PACKED;
-} MPEGLAYER3WAVEFORMAT;
+} WINE_PACKED MPEGLAYER3WAVEFORMAT;
 
 /* WAVE form wFormatTag IDs */
 
diff -Nur MPlayer-1.0pre3try2/Makefile MPlayer-1.0pre3try2-zaurus/Makefile
--- MPlayer-1.0pre3try2/Makefile	2003-12-08 21:33:31.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/Makefile	2004-04-20 22:53:51.000000000 +0000
@@ -12,12 +12,12 @@
 
 # Do not strip the binaries at installation
 ifeq ($(STRIPBINARIES),yes)
-INSTALLSTRIP = -s
+#INSTALLSTRIP = -s
 endif
 
 # These subdirectories require installation due to binaries within them.
 ifeq ($(VIDIX),yes)
-SUBDIRS += libdha vidix
+SUBDIRS += vidix
 DO_MAKE = @ for i in $(SUBDIRS); do $(MAKE) -C $$i $@; done
 endif
 
@@ -38,6 +38,7 @@
 COMMON_LIBS = libmpcodecs/libmpcodecs.a mp3lib/libMP3.a liba52/liba52.a libmpeg2/libmpeg2.a $(W32_LIB) $(DS_LIB) libaf/libaf.a libmpdemux/libmpdemux.a input/libinput.a postproc/libswscale.a osdep/libosdep.a $(DVDREAD_LIB) $(CODEC_LIBS) $(FREETYPE_LIB) $(TERMCAP_LIB) $(CDPARANOIA_LIB) $(MPLAYER_NETWORK_LIB) $(WIN32_LIB) $(GIF_LIB) $(MACOSX_FRAMEWORKS) $(SMBSUPPORT_LIB) $(FRIBIDI_LIB) $(FLAC_LIB) $(FONTCONFIG_LIB)
 
 CFLAGS = $(OPTFLAGS) -Ilibmpdemux -Iloader -Ilibvo $(FREETYPE_INC) $(EXTRA_INC) $(CDPARANOIA_INC) $(SDL_INC) $(X11_INC) $(FRIBIDI_INC) $(DVB_INC) $(XVID_INC) $(FONTCONFIG_INC) # -Wall
+HOST_CFLAGS = -Ilibmpdemux -Iloader -Ilibvo $(FREETYPE_INC) $(CDPARANOIA_INC) $(SDL_INC) $(X11_INC) $(FRIBIDI_INC) $(DVB_INC) $(XVID_INC) $(FONTCONFIG_INC) # -Wall
 
 PARTS = libmpdemux libmpcodecs mp3lib liba52 libmpeg2 libavcodec libao2 drivers osdep postproc input libvo libaf
 ifeq ($(INTERNAL_FAAD),yes)
@@ -45,7 +46,7 @@
 PARTS += libfaad2
 endif
 ifeq ($(VIDIX),yes)
-PARTS += libdha vidix
+PARTS += vidix
 endif
 ifeq ($(FAME),yes)
 PARTS += libfame
@@ -81,7 +82,7 @@
 COMMON_DEPS += libfaad2/libfaad2.a
 endif
 ifeq ($(VIDIX),yes)
-COMMON_DEPS += libdha/libdha.so vidix/libvidix.a
+COMMON_DEPS += vidix/libvidix.a
 endif
 ifeq ($(FAME),yes)
 COMMON_DEPS += libfame/libfame.a
@@ -246,7 +247,7 @@
 $(MENCODER_DEP): version.h
 
 $(PRG_CFG): version.h codec-cfg.c codec-cfg.h
-	$(CC) $(CFLAGS) -g codec-cfg.c mp_msg.c -o $(PRG_CFG) -DCODECS2HTML $(EXTRA_LIB) $(I18NLIBS)
+	$(HOST_CC) -g codec-cfg.c mp_msg.c -o $(PRG_CFG) $(HOST_CFLAGS) -DCODECS2HTML $(I18NLIBS)
 
 install: $(ALL_PRG)
 ifeq ($(VIDIX),yes)
diff -Nur MPlayer-1.0pre3try2/version.h MPlayer-1.0pre3try2-zaurus/version.h
--- MPlayer-1.0pre3try2/version.h	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/version.h	2004-04-21 03:01:02.000000000 +0000
@@ -0,0 +1 @@
+#define VERSION "1.0pre3try2-3.3.2"
diff -Nur MPlayer-1.0pre3try2/vidix/drivers/Makefile MPlayer-1.0pre3try2-zaurus/vidix/drivers/Makefile
--- MPlayer-1.0pre3try2/vidix/drivers/Makefile	2003-10-22 16:45:33.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/vidix/drivers/Makefile	2004-04-20 21:39:56.000000000 +0000
@@ -58,7 +58,14 @@
 SIS_LIBS=-L../../libdha -ldha
 SIS_CFLAGS=$(OPTFLAGS) -fPIC -I. -I..
 
-all:    $(CYBERBLADE_VID) $(RADEON_VID) $(RAGE128_VID) $(MACH64_VID) $(NVIDIA_VID) $(GENFB_VID) $(MGA_VID) $(MGA_CRTC2_VID) $(PM3_VID) $(SIS_VID)
+W100_VID=w100_vid.so
+W100_SRCS=w100_vid.c
+W100_OBJS=w100_vid.o
+W100_LIBS=-laticore
+W100_CFLAGS=$(OPTFLAGS) -fPIC -I. -I..
+
+#all:    $(CYBERBLADE_VID) $(RADEON_VID) $(RAGE128_VID) $(MACH64_VID) $(NVIDIA_VID) $(GENFB_VID) $(MGA_VID) $(MGA_CRTC2_VID) $(PM3_VID) $(SIS_VID)
+all:    $(W100_VID)
 
 
 .SUFFIXES: .c .o
@@ -125,6 +132,12 @@
 $(SIS_VID):     $(SIS_OBJS)
 	$(CC) -shared $(SIS_OBJS) $(SIS_LIBS) -Wl,-soname,$(SIS_VID) -o $(SIS_VID) 
 
+$(W100_OBJS):    $(W100_SRCS)
+	$(CC) -c $(W100_CFLAGS) -o $@ $<
+
+$(W100_VID):     $(W100_OBJS)
+	$(CC) -shared $(W100_OBJS) $(W100_LIBS) -Wl,-soname,$(W100_VID) -o $(W100_VID)
+
 clean:
 	rm -f *.o *.so *~
 
diff -Nur MPlayer-1.0pre3try2/vidix/drivers/w100api_fake.h MPlayer-1.0pre3try2-zaurus/vidix/drivers/w100api_fake.h
--- MPlayer-1.0pre3try2/vidix/drivers/w100api_fake.h	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/vidix/drivers/w100api_fake.h	2004-04-20 21:18:45.000000000 +0000
@@ -0,0 +1,336 @@
+/* -*- mode: c++; tab-width: 4 -*- */
+
+/* $Id$ */
+
+/*
+ * Copyright (c) 2003 AGAWA Koji <kaoru-k@self-core.org>
+ * All rights reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer
+ *    in this position and unchanged.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. The name of the author may not be used to endorse or promote products
+ *    derived from this software withough specific prior written permission
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
+ * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
+ * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
+ * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
+ * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
+ * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
+ * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
+ * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+ */
+
+/**
+ * @file w100api_fake.h
+ * @brief 
+ *
+ * 
+ *
+ * @author AGAWA Koji
+ * @date $Date$
+ * @version $Revision$
+ */
+
+#ifndef W100API_FAKE_H_INCLUDED
+#define W100API_FAKE_H_INCLUDED
+
+#ifdef __cplusplus
+# define EXTERN_C_BEGIN extern "C" {
+# define EXTERN_C_END }
+#else
+# define EXTERN_C_BEGIN
+# define EXTERN_C_END
+#endif
+
+EXTERN_C_BEGIN
+
+// DP_GUI_MASTER_CNTL.GMC_Dst_DataType
+// DP_DATATYPE.Dp_Dst_DataType
+/* #define DSTTYPE_8BPP            2       // 8 bpp grey scale */
+/* #define DSTTYPE_16BPP_1555      3       //16 bpp aRGB 1555 */
+/* #define DSTTYPE_16BPP_444       5       //16 bpp aRGB 4444 */
+#define DSTTYPE_8BPP            1
+
+// DP_GUI_MASTER_CNTL.GMC_Src_DataType
+// DP_DATATYPE.Dp_Src_DataType
+#define SRCTYPE_1BPP_OPA        0       //mono (expanded to frgd, bkgd)
+#define SRCTYPE_1BPP_TRA        1       //mono (expanded to frgd, leave_alone)
+#define SRCTYPE_EQU_DST         3       //color (same as DST)
+#define SRCTYPE_SOLID_COLOR_BLT 4       //solid color for Blt (use frgd)
+#define SRCTYPE_4BPP            5       //4 bpp
+#define SRCTYPE_12BPP_PACKED    6       //12 bpp packed
+
+#define ROP3_SRCCOPY            0xCC
+
+#define OVLTYPE_YUV420          0x07
+
+typedef struct {
+    /* ½ç½ø¤È·¿¤¬Ì¤³ÎÄê */
+    int16_t XCoord;
+    int16_t YCoord;
+} ATI_POINT;
+
+typedef struct {
+    /* ½ç½ø¤È·¿¤¬Ì¤³ÎÄê */
+    int16_t XCoord;
+    int16_t YCoord;
+    int16_t Width;
+    int16_t Height;
+} ATI_RECT;
+
+typedef struct {
+    int16_t X_Top_Left;                  // x coordinate of top left corner
+    int16_t Y_Top_Left;                  // y coordinate of top left corner
+    int16_t X_Bottom_Right;              // x coordinate of bottom right corner
+    int16_t Y_Bottom_Right;              // y coordinate of bottom right corner
+} ATI_CLIPRECT;
+
+typedef struct {
+    /* ½ç½ø¤È·¿¤¬Ì¤³ÎÄê */
+    uint32_t Count;                        /* +0 */
+    uint8_t ScaleXFactor;                 /* +4 ³ÎÄê */
+    uint8_t ScaleYFactor;                 /* +5 ³ÎÄê */
+    uint8_t BlendOn;                      /* +6 ³ÎÄê */
+    uint8_t dummy1;
+} ATI_STRETCH;                          /* 8bytes? */
+
+typedef struct {
+    uint32_t *lpSrcBitmap;
+    uint16_t XCoord;                      /* +4  ³ÎÄê */
+    uint16_t YCoord;                      /* +6  ³ÎÄê */
+    uint16_t SrcPitch;                    /* +8  ³ÎÄê */
+    uint16_t SrcHeight;                   /* +10 ³ÎÄê */
+    uint16_t OverlayWidth;
+    uint16_t OverlayHeight;
+    uint32_t lpOverlayKey;                /* +16 ³ÎÄê */
+    uint8_t OverlayFormat;               /* +20 ³ÎÄê */
+    uint8_t dummy1;
+    uint16_t dummy2;
+} ATI_OVERLAYPROP;                      /* 24bytes? */
+
+typedef struct {
+    int HInvert;
+    int VInvert;
+} ATI_EXTVIDEOPROP;
+
+typedef struct {
+    ATI_EXTVIDEOPROP ExtVideoProp;
+} ATI_UNKNOWN1;
+
+typedef struct {
+	uint8_t HExpansion;                   /* +8  ³ÎÄê */
+    uint8_t VExpansion;                   /* +9  ³ÎÄê */
+    uint8_t RConversion;                  /* +12 ³ÎÄê */
+/*     ATI_UNKNOWN1 x; */
+} ATI_EXTENDEDOVERLAYPROP;              /* 16byte? */
+
+/**
+ * ¥¢¥¯¥»¥é¥ì¡¼¥·¥ç¥ó¤ÎÍøÍÑ¤ò³«»Ï¤¹¤ë¡£
+ *
+ * @return              1:success, 0:fail
+ */
+int AtiCore_ProcessAttach(void);
+
+/**
+ * ¥¢¥¯¥»¥é¥ì¡¼¥·¥ç¥ó¤ÎÍøÍÑ¤ò½ªÎ»¤¹¤ë¡£
+ *
+ * @return              *ÉÔÌÀ*
+ */
+int AtiCore_ProcessDetach(void);
+
+/**
+ * ¥µ¡¼¥Õ¥§¥¹¤ò¥Ó¥Ç¥ª¥á¥â¥ê¾å¤ËºîÀ®¤¹¤ë¡£
+ *
+ * @arg     handle      (ÊÖÃÍ)¥µ¡¼¥Õ¥§¥¹¤Î¥Ï¥ó¥É¥ë
+ * @arg     offset      (ÊÖÃÍ)¥µ¡¼¥Õ¥§¥¹¤Î¥ª¥Õ¥»¥Ã¥È
+ * @arg     size        ¥µ¡¼¥Õ¥§¥¹¤Î¥µ¥¤¥º
+ * @arg     direction   (0:Äã°Ì¤«¤é¹â°Ì¤Ø, 1:¹â°Ì¤«¤éÄã°Ì¤Ø)¸þ¤«¤Ã¤Æ³ÎÊÝ
+ * @return              1:success, 0:fail
+ */
+int AtiCore_AllocateSurface(uint16_t *handle, uint32_t *offset,
+                            uint32_t size, uint32_t direction);
+
+/**
+ * ¥µ¡¼¥Õ¥§¥¹¤òÇË´þ¤¹¤ë¡£
+ *
+ * @arg     handle      ¥µ¡¼¥Õ¥§¥¹¤Î¥Ï¥ó¥É¥ë
+ * @return              1:success, 0:fail
+ */
+int AtiCore_DestroySurface(uint16_t handle);
+
+/*8
+ * @param   rop         8¥Ó¥Ã¥È¤Î¥Õ¥é¥°¤È»×¤ï¤ì¤ë
+ */
+int AtiCore_SetRopOperation(uint32_t rop);
+
+int AtiCore_SetDstType(uint32_t);
+int AtiCore_SetSrcType(uint32_t);
+int AtiCore_SetSrcClippingRect(ATI_CLIPRECT *cliprect);
+int AtiCore_SetDstClippingRect(ATI_CLIPRECT *cliprect);
+int AtiCore_SetSrcPitchOffset(int pitch, int offset);
+int AtiCore_SetDstPitchOffset(int pitch, int offset);
+
+int AtiCore_BitBltFilpRotate(int blt090Rotate,
+                             ATI_RECT *dstRect, ATI_RECT *srcRect);
+int AtiCore_StretchBlt(ATI_STRETCH *option,
+                       ATI_POINT *point, ATI_RECT *srcRect);
+
+
+/**
+ * (BitBlt¤Ê¤É¤Î)½èÍý¤¬´°Î»¤¹¤ë¤Î¤òÂÔ¤Ä¡£
+ *
+ * @param   nsec        ¥¦¥§¥¤¥È»þ´Ö(msec)
+ * @return              1:½èÍý¤¬´°Î»¤·¤¿, 0:½èÍý¤Ï¤Þ¤À½ª¤ï¤Ã¤Æ¤¤¤Ê¤¤
+ */
+int AtiCore_WaitComplete(int msec);
+
+/**
+ * ¥ª¡¼¥Ð¥ì¥¤¤òºîÀ®¤¹¤ë¡£
+ *
+ * @param   handle      (ÊÖÃÍ)¥ª¡¼¥Ð¥ì¥¤¤Î¥Ï¥ó¥É¥ë
+ * @return              1:success, 0:fail
+ */
+int AtiCore_AllocOverlay(uint16_t *handle);
+
+int AtiCore_ReleaseOverlay(uint16_t handle);
+
+/**
+ * @return              1:success, 0:fail
+ */
+int AtiCore_SetupOverlay(uint16_t handle, ATI_OVERLAYPROP *prop);
+
+int AtiCore_SetupOverlayExtended(uint16_t handle, ATI_EXTENDEDOVERLAYPROP *prop);
+
+/**
+ * @return              1:success, 0:fail
+ */
+int AtiCore_SetOverlayOnOff(uint16_t handle, int isShow);
+
+int AtiCore_SetOverlayPos(uint16_t handle, uint16_t x, uint16_t y);
+
+int AtiCore_SetupMemoryTransfer(uint32_t offset, uint32_t *regdata);
+int AtiCore_TerminateMemoryTransfer(void);
+
+int AtiCore_GetFrontBufferPitchOffset(uint32_t *pitch, uint32_t *offset);
+
+/**
+ * @return              1:success, 0:fail
+ */
+int AtiCore_SetDisplayBrightness(int brightness);
+
+/**
+ * @return              1:success, 0:fail
+ */
+int GetAvailableVideoMem(uint32_t *internal, uint32_t *external);
+/*
+Dump of assembler code for function GetAvailableVideoMem:
+0x404e643c <GetAvailableVideoMem>:      mov     r12, sp
+0x404e6440 <GetAvailableVideoMem+4>:    stmdb   sp!, {r4, r5, r11, r12, lr, pc}
+0x404e6444 <GetAvailableVideoMem+8>:    sub     r11, r12, #4    ; 0x4
+0x404e6448 <GetAvailableVideoMem+12>:   mov     r5, r1
+0x404e644c <GetAvailableVideoMem+16>:   
+    ldr r4, [pc, #92]   ; 0x404e64b0 <GetAvailableVideoMem+116>
+0x404e6450 <GetAvailableVideoMem+20>:   mov     r1, #420        ; 0x1a4
+0x404e6454 <GetAvailableVideoMem+24>:   ldr     r2, [r4]
+0x404e6458 <GetAvailableVideoMem+28>:   sub     sp, sp, #4      ; 0x4
+0x404e645c <GetAvailableVideoMem+32>:   add     r12, r2, #80    ; 0x50
+0x404e6460 <GetAvailableVideoMem+36>:   ldmda   r12, {r3, r12}
+0x404e6464 <GetAvailableVideoMem+40>:   sub     r3, r12, r3
+0x404e6468 <GetAvailableVideoMem+44>:   mov     r2, #4  ; 0x4
+0x404e646c <GetAvailableVideoMem+48>:   add     r3, r3, #1      ; 0x1
+0x404e6470 <GetAvailableVideoMem+52>:   str     r3, [r0]
+0x404e6474 <GetAvailableVideoMem+56>:   mov     r0, #0  ; 0x0
+0x404e6478 <GetAvailableVideoMem+60>:   mov     r3, #30720      ; 0x7800
+0x404e647c <GetAvailableVideoMem+64>:   str     r3, [r11, -#24]
+0x404e6480 <GetAvailableVideoMem+68>:   sub     r3, r11, #24    ; 0x18
+0x404e6484 <GetAvailableVideoMem+72>:   bl      0x404e84f0 <WriteRegDirect>
+0x404e6488 <GetAvailableVideoMem+76>:   mov     r3, #0  ; 0x0
+0x404e648c <GetAvailableVideoMem+80>:   str     r3, [r5]
+0x404e6490 <GetAvailableVideoMem+84>:   
+    ldr r1, [pc, #28]   ; 0x404e64b4 <GetAvailableVideoMem+120>
+0x404e6494 <GetAvailableVideoMem+88>:   ldr     r2, [r4]
+0x404e6498 <GetAvailableVideoMem+92>:   ldrh    r3, [r2, #14]
+0x404e649c <GetAvailableVideoMem+96>:   cmp     r3, r1
+0x404e64a0 <GetAvailableVideoMem+100>:  moveq   r3, #2097152    ; 0x200000
+0x404e64a4 <GetAvailableVideoMem+104>:  streq   r3, [r5]
+0x404e64a8 <GetAvailableVideoMem+108>:  mov     r0, #1  ; 0x1
+0x404e64ac <GetAvailableVideoMem+112>:  
+    b   0x404e64b8 <GetAvailableVideoMem+124>
+0x404e64b0 <GetAvailableVideoMem+116>:  submis  pc, r12, r12, asr r5
+0x404e64b4 <GetAvailableVideoMem+120>:  andeq   r5, r0, r1, asr #14
+0x404e64b8 <GetAvailableVideoMem+124>:  ldmdb   r11, {r4, r5, r11, sp, pc}
+End of assembler dump.
+*/
+
+
+/* ================================================================ */
+/* from libqte.so.2.3.2 */
+/*
+AtiCore_AlphaBlend
+AtiCore_BitBlt
+AtiCore_BrushType
+AtiCore_CursorOnOff
+AtiCore_DrawPixel
+AtiCore_Flush
+AtiCore_GammaCorrection
+AtiCore_GetCRC
+AtiCore_GetCursorPos
+AtiCore_GetDeviceInfo
+AtiCore_GetGPIO_Data
+AtiCore_GetGraphicExtended
+AtiCore_GetGraphicWindowPos
+AtiCore_GetLargestVideoMemBlock
+AtiCore_GetLastError
+AtiCore_GetMultiCRC
+AtiCore_GetOverlayPos
+AtiCore_GetPitchOffsetProperty
+AtiCore_Host
+AtiCore_LoadCursorBitMap
+AtiCore_PaintRect
+AtiCore_PolyScanline
+AtiCore_Polyline
+AtiCore_ProcessAttachMinimal
+AtiCore_ProcessAttachSpecialMode
+AtiCore_ProcessDetachMinimal
+AtiCore_ProcessDetachSpecialMode
+AtiCore_ReadCfgReg
+AtiCore_ReadMem
+AtiCore_ReadReg
+AtiCore_ScanlineShading
+AtiCore_SetApertures
+AtiCore_SetBkgColour
+AtiCore_SetBytePixelOrder
+AtiCore_SetCursorPos
+AtiCore_SetDisplayParameters
+AtiCore_SetDriverBehaviour
+AtiCore_SetFrgColour
+AtiCore_SetFrontBuffer
+AtiCore_SetGPIO_Data
+AtiCore_SetGraphicWindowOnOff
+AtiCore_SetGraphicWindowPos
+AtiCore_SetOverlayPosUsingGraphicWindowXY
+AtiCore_SetPartialCursor
+AtiCore_SetupGraphicExtended
+AtiCore_SetupGraphicWindow
+AtiCore_SetupPM4
+AtiCore_SmallText
+AtiCore_SubmitPM4Packet
+AtiCore_TransBitBlt
+AtiCore_WriteCfgReg
+AtiCore_WriteMem
+AtiCore_WriteReg
+ */
+
+EXTERN_C_END
+
+#endif /* W100API_FAKE_H_INCLUDED */
diff -Nur MPlayer-1.0pre3try2/vidix/drivers/w100_vid.c MPlayer-1.0pre3try2-zaurus/vidix/drivers/w100_vid.c
--- MPlayer-1.0pre3try2/vidix/drivers/w100_vid.c	1970-01-01 00:00:00.000000000 +0000
+++ MPlayer-1.0pre3try2-zaurus/vidix/drivers/w100_vid.c	2004-04-21 05:15:30.000000000 +0000
@@ -0,0 +1,395 @@
+#include <errno.h>
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <inttypes.h>
+#include <unistd.h>
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+
+#define W100FB_CONFIG_EX       0x57415202 /* WAL\02 */
+
+#include "../vidix.h"
+#include "../fourcc.h"
+#include "../../config.h"
+#include "w100api_fake.h"
+
+#define UNUSED(v) ((void)(v))
+
+static uint16_t st_overlayHandle;
+
+static vidix_capability_t w100_cap =
+{
+    "ATI W100 driver",
+    "AGAWA Koji <kaoru-K@self-core.org>",
+    TYPE_OUTPUT,
+    { 0, 0, 0, 0 },                     /* reserved */
+    640,                                /* max width */
+    640,                                /* max height */
+    4,                                  /* min width */
+    4,                                  /* min height */
+    -1,                                 /* max framerate */
+    FLAG_EQUALIZER,                     /* flags */
+    0x1002,                             /* VENDOR_ATI(libdha/pci_vendors.h) */
+    -1,                                 /* device id */
+    { 0, 0, 0, 0 }                      /* reserved */
+};
+
+static int w100_setres(int res)
+{
+    int scr;
+    int fd;
+    if ((fd = open("/dev/fb0", O_RDWR)) < 0) {
+    } else {
+	scr = res;
+	ioctl(fd, W100FB_CONFIG_EX, &scr);
+	close(fd);
+    }
+    return 0;
+}
+
+unsigned int vixGetVersion(void)
+{
+    return VIDIX_VERSION;
+}
+
+int vixProbe(int verbose, int force)
+{
+    UNUSED(verbose);
+    UNUSED(force);
+    return 0;
+}
+
+int vixInit(void)
+{
+    w100_setres(111);
+    if (AtiCore_ProcessAttach()) {
+        if (AtiCore_AllocOverlay(&st_overlayHandle))
+            return 0;
+    }
+
+    return ENOSYS;
+}
+
+void vixDestroy(void)
+{
+    AtiCore_SetOverlayOnOff(st_overlayHandle, 0);
+    AtiCore_ReleaseOverlay(st_overlayHandle);
+    AtiCore_ProcessDetach();
+    w100_setres(101);
+}
+
+int vixGetCapability(vidix_capability_t *to)
+{
+    memcpy(to, &w100_cap, sizeof(vidix_capability_t));
+    return 0;
+}
+
+static int is_supported_fourcc(uint32_t fourcc)
+{
+    switch(fourcc) {
+    case IMGFMT_YV12:
+        return 1;
+    default:
+        return 0;
+    }
+}
+
+int vixQueryFourcc(vidix_fourcc_t *to)
+{
+    if (is_supported_fourcc(to->fourcc)) {
+        to->depth = VID_DEPTH_1BPP | VID_DEPTH_2BPP |
+            VID_DEPTH_4BPP | VID_DEPTH_8BPP |
+            VID_DEPTH_12BPP| VID_DEPTH_15BPP|
+            VID_DEPTH_16BPP| VID_DEPTH_24BPP|
+            VID_DEPTH_32BPP;
+        to->flags = VID_CAP_EXPAND | VID_CAP_SHRINK;
+/*         to->flags = VID_CAP_EXPAND | VID_CAP_SHRINK | VID_CAP_COLORKEY; */
+        return 0;
+    } else
+        to->depth = to->flags = 0;
+
+    return ENOSYS;
+}
+
+int vixGetGrKeys(vidix_grkey_t *grkey)
+{
+    UNUSED(grkey);
+    return 0;
+}
+
+int vixSetGrKeys(const vidix_grkey_t *grkey)
+{
+    UNUSED(grkey);
+    return 0;
+}
+
+static vidix_video_eq_t st_equal =
+{
+    VEQ_CAP_BRIGHTNESS,
+    0, 0, 0, 0, 0, 0, 0, 0
+};
+
+int vixPlaybackGetEq(vidix_video_eq_t * eq)
+{
+    memcpy(eq, &st_equal, sizeof(st_equal));
+    return 0;
+}
+
+int vixPlaybackSetEq(const vidix_video_eq_t * eq)
+{
+    int br;
+
+    if (eq->cap & VEQ_CAP_BRIGHTNESS)
+        st_equal.brightness = eq->brightness;
+    if (eq->cap & VEQ_CAP_CONTRAST)
+        st_equal.contrast = eq->contrast;
+    if (eq->cap & VEQ_CAP_SATURATION)
+        st_equal.saturation = eq->saturation;
+    if (eq->cap & VEQ_CAP_HUE)
+        st_equal.hue = eq->hue;
+    if (eq->cap & VEQ_CAP_RGB_INTENSITY) {
+        st_equal.red_intensity   = eq->red_intensity;
+        st_equal.green_intensity = eq->green_intensity;
+        st_equal.blue_intensity  = eq->blue_intensity;
+    }
+    st_equal.flags = eq->flags;
+
+    br = (st_equal.brightness + 1000) * 127 / 2000;
+    if (br < 0)
+        br = 0;
+    if (br > 127)
+        br = 127;
+    if (br > 64)
+        br -= 64;
+    else
+        br += 64;
+
+    AtiCore_SetDisplayBrightness(br);
+
+    return 0;
+}
+
+static uint32_t st_frameOffsets[VID_PLAY_MAXFRAMES];
+static vidix_playback_t st_playbackInfo;
+static ATI_OVERLAYPROP st_overlayProp;
+
+int vixConfigPlayback(vidix_playback_t *info)
+{
+    int src_w, src_h;
+    int drw_w, drw_h;
+    int y_pitch, uv_pitch;
+    int i, ret, newNumFrames;
+    ATI_CLIPRECT clipRect;
+    uint32_t base;
+    uint32_t internalVramSize, internalVramAddr;
+    uint32_t externalVramSize, externalVramAddr;
+    int useExternalVram = 0;
+
+    if (!is_supported_fourcc(info->fourcc))
+        return -1;
+
+    src_w = info->src.w;
+    src_h = info->src.h;
+    drw_w = info->dest.w;
+    drw_h = info->dest.h;
+
+    switch (info->fourcc) {
+    case IMGFMT_YV12:
+        y_pitch = (src_w + 15) & ~15;
+        uv_pitch = ((src_w / 2) + 7) & ~7;
+        info->offset.y = 0;
+        info->offset.v = y_pitch * src_h;
+        info->offset.u = info->offset.v + uv_pitch * (src_h / 2);
+        info->frame_size = y_pitch * src_h + 2 * uv_pitch * (src_h / 2);
+        break;
+    default:
+        return -1;
+    }
+/*     fprintf(stderr, "w100_vid: num_frames:%d\n", info->num_frames); */
+/*     fprintf(stderr, "w100_vid: y_pitch:%d\n", y_pitch); */
+
+/*     fprintf(stderr, "w100_vid: struct info {\n"); */
+/*     fprintf(stderr, "w100_vid:   src.x:%d. src.y:%d. src.w:%d, src.h:%d,\n", */
+/*             info->src.x, info->src.y, info->src.w, info->src.h); */
+/*     fprintf(stderr, "w100_vid:   dest.x:%d. dest.y:%d. dest.w:%d, dest.h:%d,\n", */
+/*             info->dest.x, info->dest.y, info->dest.w, info->dest.h); */
+/*     fprintf(stderr, "w100_vid:   offset.y:%d, offset.v:%d offset.y:%d\n", */
+/*             info->offset.y, info->offset.v, info->offset.u); */
+/*     fprintf(stderr, "w100_vid:   frame_size:%d,\n", info->frame_size); */
+
+    GetAvailableVideoMem(&internalVramSize, &externalVramSize);
+    AtiCore_SetupMemoryTransfer(0, &internalVramAddr);
+    AtiCore_TerminateMemoryTransfer();
+    AtiCore_SetupMemoryTransfer(0xF000000, &externalVramAddr);
+    AtiCore_TerminateMemoryTransfer();
+
+/*     info->num_frames = 1; */
+    useExternalVram =  (getenv("MPLAYER_W100_USEEXTVRAM") ? 1 : 0);
+
+    if (useExternalVram) {
+        /* $B%U%l!<%`%P%C%U%!$H$7$FMxMQ$5$l$F$$$kItJ,$O;H$o$J$$(B */
+        base = 640 * 480 * 2;
+        newNumFrames = (externalVramSize - (640 * 480 * 2))
+            / info->frame_size;
+
+        /* FIXME: $B30It(B VRAM $B$K%*!<%P%l%$$r3NJ]$9$k$H!"(BVGA/QVGA $BLd$o$:(B
+         $BI=<($,GH>u$KMp$l$k!#(B @SL-C700/C750 */
+    } else {
+        /* $B%U%l!<%`%P%C%U%!It$b;H$o$J$$$H!"(BVRAM $BMFNL$,B-$j$J$$(B */
+/*         base = 320 * 240 * 2; */
+        base = 320 * 4 * 2;
+        memset((void *)internalVramAddr, 0x00, 320 * 4 * 2);
+        newNumFrames = internalVramSize / info->frame_size;
+    }
+
+    if (newNumFrames > info->num_frames)
+        newNumFrames = info->num_frames;
+    if (newNumFrames > VID_PLAY_MAXFRAMES)
+        newNumFrames = VID_PLAY_MAXFRAMES;
+    info->num_frames = newNumFrames;
+
+    info->dga_addr =
+        (void *)(useExternalVram ? externalVramAddr : internalVramAddr);
+/*     fprintf(stderr, "w100_vid:   num_frames:%d,\n", info->num_frames); */
+
+    info->dest.pitch.y = 16;
+    info->dest.pitch.u = 16;
+    info->dest.pitch.v = 16;
+
+/*     fprintf(stderr, "w100_vid: }\n"); */
+/*     fprintf(stderr, "w100_vid: base:%d\n", base); */
+
+    for (i = 0; i < info->num_frames; ++i) {
+        info->offsets[i] = base + info->frame_size * i;
+        st_frameOffsets[i] = info->offsets[i]
+            + (useExternalVram ? 0xF000000 : 0);
+    }
+
+    st_overlayProp.lpSrcBitmap = (void *)st_frameOffsets[0];
+    st_overlayProp.XCoord = 0;
+    st_overlayProp.YCoord = 0;
+    st_overlayProp.SrcPitch = y_pitch;
+    st_overlayProp.SrcHeight = src_h;
+    st_overlayProp.OverlayWidth = y_pitch;
+    st_overlayProp.OverlayHeight = src_h;
+    st_overlayProp.lpOverlayKey = 0;
+    st_overlayProp.OverlayFormat = OVLTYPE_YUV420;
+
+    ret = AtiCore_SetupOverlay(st_overlayHandle, &st_overlayProp);
+/*     printf("w100_vid: AtiCore_SetupOverlay: ret=%d\n", ret); */
+
+    clipRect.X_Top_Left = 0;
+    clipRect.Y_Top_Left = 0;
+    clipRect.X_Bottom_Right = st_overlayProp.SrcPitch;
+    clipRect.Y_Bottom_Right = st_overlayProp.SrcHeight;
+    AtiCore_SetDstClippingRect(&clipRect);
+    clipRect.X_Bottom_Right = info->src.w;
+    clipRect.Y_Bottom_Right = info->src.h;
+    AtiCore_SetSrcClippingRect(&clipRect);
+
+/*     AtiCore_SetOverlayPos(st_overlayHandle, info->dest.x, info->dest.y); */
+    AtiCore_SetOverlayPos(st_overlayHandle, 4, 0);
+
+    AtiCore_SetRopOperation(ROP3_SRCCOPY);
+    AtiCore_SetDstType(DSTTYPE_8BPP);
+    AtiCore_SetSrcType(SRCTYPE_EQU_DST);
+
+    vixPlaybackSetEq(&st_equal);
+
+    memcpy(&st_playbackInfo, info, sizeof(*info));
+
+/*     fprintf(stderr, "w100_vid: ---- vixConfigPlayback complete.\n"); */
+
+    return 0;
+}
+
+int vixPlaybackOn(void)
+{
+    AtiCore_SetOverlayOnOff(st_overlayHandle, 1);
+
+    return 0;
+}
+
+int vixPlaybackOff(void)
+{
+    AtiCore_SetOverlayOnOff(st_overlayHandle, 0);
+
+    return 0;
+}
+
+int vixPlaybackFrameSelect(unsigned int frame)
+{
+    st_overlayProp.lpSrcBitmap = (void *)st_frameOffsets[frame];
+    AtiCore_SetupOverlay(st_overlayHandle, &st_overlayProp);
+
+#if 0
+    ATI_STRETCH stretchOptions;
+    ATI_POINT dpPoint;
+    ATI_RECT srcRect, dstRect;
+    int ret;
+
+/*     fprintf(stderr, "w100_vid: vixPlaybackFrameSelect(frame=%d)\n", frame); */
+/*     fprintf(stderr, "w100_vid:   dga_addr:0x%08x, offset:%d,\n", */
+/*             st_playbackInfo.dga_addr, st_frameOffsets[frame]); */
+
+    stretchOptions.Count = 1;
+    stretchOptions.ScaleXFactor = 4;
+    stretchOptions.ScaleYFactor = 4;
+    stretchOptions.BlendOn = 0;
+    stretchOptions.dummy1 = 0;
+
+    dpPoint.XCoord = 0;
+    dpPoint.YCoord = 0;
+
+    srcRect.XCoord = st_playbackInfo.src.x;
+    srcRect.YCoord = st_playbackInfo.src.y;
+    srcRect.Width = st_playbackInfo.src.w;
+    srcRect.Height = st_playbackInfo.src.h;
+    fprintf(stderr, "%d, %d, %d, %d\n", srcRect.XCoord, srcRect.YCoord,
+            srcRect.Width, srcRect.Height);
+
+    dstRect.XCoord = 0;
+    dstRect.YCoord = 0;
+    dstRect.Width = 432;//st_playbackInfo.src.w;
+    dstRect.Height = 592;//st_playbackInfo.src.h;
+
+#if 1
+    while (AtiCore_WaitComplete(100) != 1)
+        ;
+
+	AtiCore_SetRopOperation( ROP3_SRCCOPY );
+	AtiCore_SetDstType( DSTTYPE_8BPP );
+	AtiCore_SetSrcType( SRCTYPE_EQU_DST );
+
+    ret = AtiCore_SetSrcPitchOffset(st_playbackInfo.src.w,
+                                    st_frameOffsets[frame]);
+    fprintf(stderr, "AtiCore_SetSrcPitchOffset(%d, %x) %d\n",
+            st_playbackInfo.src.w, st_frameOffsets[frame], ret);
+    ret = AtiCore_SetDstPitchOffset(432, 0);
+/*     printf("AtiCore_SetDstPitchOffset: ret=%d\n", ret); */
+
+/*     ret = AtiCore_BitBltFilpRotate(0, &srcRect, &dstRect); */
+    ret = AtiCore_StretchBlt(&stretchOptions, &dpPoint, &srcRect);
+    fprintf(stderr, "AtiCore_StretchBlt: ret=%d\n", ret);
+
+#else
+    {
+        int y, srcOffset = 0, dstOffset = 0;
+        fprintf(stderr, "%d %d %d\n", st_playbackInfo.src.h,
+                st_playbackInfo.src.w, 0);
+        for (y = 0; y < st_playbackInfo.src.h; ++y) {
+            memcpy(
+                0xF1100000 + dstOffset,
+                st_playbackInfo.dga_addr + st_playbackInfo.offsets[frame] + srcOffset,
+                st_playbackInfo.src.w);
+            srcOffset += st_playbackInfo.src.w;
+            dstOffset += 432;
+        }
+    }
+#endif
+#endif
+
+    return 0;
+}
